{
  "comments": [
    {
      "key": {
        "uuid": "3f79a3b5_4764804e",
        "filename": "inc/python",
        "patchSetId": 4
      },
      "lineNbr": 280,
      "author": {
        "id": 13252
      },
      "writtenOn": "2018-12-18T13:05:39Z",
      "side": 1,
      "message": "If the above \"if\" branch is not taken, don\u0027t we now always take this branch, making the following \"elif\" and \"else\" branches obsolete?",
      "revId": "3db8c4bbb5963777c0702811319329758e4d134d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1f769fc5_47603902",
        "filename": "inc/python",
        "patchSetId": 4
      },
      "lineNbr": 280,
      "author": {
        "id": 2472
      },
      "writtenOn": "2019-01-02T18:07:26Z",
      "side": 1,
      "message": "Yes, I think you are correct.",
      "parentUuid": "3f79a3b5_4764804e",
      "revId": "3db8c4bbb5963777c0702811319329758e4d134d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dfd5e7cf_afc56390",
        "filename": "inc/python",
        "patchSetId": 4
      },
      "lineNbr": 283,
      "author": {
        "id": 9003
      },
      "writtenOn": "2019-01-08T19:54:52Z",
      "side": 1,
      "message": "In manila -- where we\u0027ve inherited some \"interesting\" customized legacy tempest jobs -- we discovered that with this patch, with python3 enabled for all services running in our devstack jobs, and with \u0027USE_PYTHON3\u003dtrue\u0027 in devstack\u0027s local conf, PYTHON3_VERSION was not set. So when we thought we were pip installing with python3 we were really just running \"pip\" (get_pip_version with null $1).\n\nI\u0027m working around this atm by explicitly setting PYTHON3_VERSION in local.conf and we plan to convert the legacy jobs to pure zuulv3 and quit (apparently) skipping the python version discovery code in devstack.\n\nNot sure it\u0027s worth putting defensive code here for nil PYTHON3_VERSION or not.  For PYTHON2_VERSION the issue is more subtle since current default for pip install is python 2.",
      "range": {
        "startLine": 281,
        "startChar": 0,
        "endLine": 283,
        "endChar": 63
      },
      "revId": "3db8c4bbb5963777c0702811319329758e4d134d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dfd5e7cf_75f0aeca",
        "filename": "inc/python",
        "patchSetId": 4
      },
      "lineNbr": 283,
      "author": {
        "id": 2472
      },
      "writtenOn": "2019-01-08T21:36:11Z",
      "side": 1,
      "message": "That extra protection sounds like a good idea for a follow-up patch.",
      "parentUuid": "dfd5e7cf_afc56390",
      "range": {
        "startLine": 281,
        "startChar": 0,
        "endLine": 283,
        "endChar": 63
      },
      "revId": "3db8c4bbb5963777c0702811319329758e4d134d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3f79a3b5_754ef7c3",
        "filename": "stackrc",
        "patchSetId": 4
      },
      "lineNbr": 134,
      "author": {
        "id": 6873
      },
      "writtenOn": "2018-12-05T19:56:41Z",
      "side": 1,
      "message": "Apparently this doesn\u0027t even matter, at least not in the tempest-full-py3 job, because swift is disabled in the job definition:\n\nhttps://github.com/openstack/tempest/blob/master/.zuul.yaml#L166\n\nThat\u0027s not true in the grenade-py3 job though:\n\nhttp://logs.openstack.org/15/622415/3/check/grenade-py3/341fea7/logs/new/local.conf.txt.gz\n\nENABLED_SERVICES\u003dc-api,c-bak,c-sch,c-vol,ceilometer-acentral,ceilometer-acompute,ceilometer-alarm-evaluator,ceilometer-alarm-notifier,ceilometer-anotification,ceilometer-api,ceilometer-collector,cinder,dstat,etcd3,g-api,g-reg,key,mysql,n-api,n-api-meta,n-cauth,n-cond,n-cpu,n-novnc,n-obj,n-sch,peakmem_tracker,placement-api,q-agt,q-dhcp,q-l3,q-meta,q-metering,q-svc,rabbit,s-account,s-container,s-object,s-proxy,tempest\n\nand ta-da! it\u0027s hitting the filter code:\n\nhttp://logs.openstack.org/15/622415/3/check/grenade-py3/341fea7/logs/grenade.sh.txt.gz#_2018-12-05_16_34_36_614\n\n2018-12-05 16:34:36.611 | Check python version for : /opt/stack/new/swift\n2018-12-05 16:34:36.614 | Explicitly using 2.7 version to install /opt/stack/new/swift based on DISABLED_PYTHON3_PACKAGES",
      "revId": "3db8c4bbb5963777c0702811319329758e4d134d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3f79a3b5_505509ec",
        "filename": "stackrc",
        "patchSetId": 4
      },
      "lineNbr": 134,
      "author": {
        "id": 2472
      },
      "writtenOn": "2018-12-05T20:16:08Z",
      "side": 1,
      "message": "Right, I added this to get the grenade job to pass.",
      "parentUuid": "3f79a3b5_754ef7c3",
      "revId": "3db8c4bbb5963777c0702811319329758e4d134d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3f79a3b5_9d2732b0",
        "filename": "stackrc",
        "patchSetId": 4
      },
      "lineNbr": 134,
      "author": {
        "id": 8556
      },
      "writtenOn": "2018-12-06T08:11:18Z",
      "side": 1,
      "message": "yeah tempest-full-py3 does not run swift test.",
      "parentUuid": "3f79a3b5_754ef7c3",
      "revId": "3db8c4bbb5963777c0702811319329758e4d134d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}