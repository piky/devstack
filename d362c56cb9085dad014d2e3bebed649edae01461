{
  "comments": [
    {
      "key": {
        "uuid": "37701225_33678487",
        "filename": ".zuul.yaml",
        "patchSetId": 11
      },
      "lineNbr": 602,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-07T10:51:35Z",
      "side": 1,
      "message": "This is not another platform test. Let\u0027s drop this infix.",
      "range": {
        "startLine": 602,
        "startChar": 19,
        "endLine": 602,
        "endChar": 27
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d4049ce8_401e35dd",
        "filename": ".zuul.yaml",
        "patchSetId": 11
      },
      "lineNbr": 602,
      "author": {
        "id": 4393
      },
      "writtenOn": "2021-02-08T14:44:10Z",
      "side": 1,
      "message": "Sure, but I think gmann asked for this. I dunno what \"platform\" is in this case, but...okay :)",
      "parentUuid": "37701225_33678487",
      "range": {
        "startLine": 602,
        "startChar": 19,
        "endLine": 602,
        "endChar": 27
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10ee72e6_92d45c21",
        "filename": ".zuul.yaml",
        "patchSetId": 11
      },
      "lineNbr": 602,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-09T18:16:45Z",
      "side": 1,
      "message": "The \u0027platform\u0027 means something else than the default which is Ubuntu Focal now. See the examples above. This sounds more like the ipv6 variant (but running Tempest).",
      "parentUuid": "d4049ce8_401e35dd",
      "range": {
        "startLine": 602,
        "startChar": 19,
        "endLine": 602,
        "endChar": 27
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43715885_9480d727",
        "filename": ".zuul.yaml",
        "patchSetId": 11
      },
      "lineNbr": 602,
      "author": {
        "id": 8556
      },
      "writtenOn": "2021-02-09T18:25:46Z",
      "side": 1,
      "message": "I thought of \u0027platform\u0027 as they run full tempest but if it is confusing we can name it like devstack-tempest-full-async",
      "parentUuid": "10ee72e6_92d45c21",
      "range": {
        "startLine": 602,
        "startChar": 19,
        "endLine": 602,
        "endChar": 27
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f57dc910_5d861f73",
        "filename": ".zuul.yaml",
        "patchSetId": 11
      },
      "lineNbr": 603,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-07T10:51:35Z",
      "side": 1,
      "message": "I know it\u0027s tempting to run tempest but this really optimises stacking so let\u0027s base off devstack.",
      "range": {
        "startLine": 603,
        "startChar": 12,
        "endLine": 603,
        "endChar": 28
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "def7e2b7_25727142",
        "filename": ".zuul.yaml",
        "patchSetId": 11
      },
      "lineNbr": 603,
      "author": {
        "id": 11604
      },
      "writtenOn": "2021-02-08T11:46:41Z",
      "side": 1,
      "message": "i think dan based it off this to prove that the cloud was working after the devstack run",
      "parentUuid": "f57dc910_5d861f73",
      "range": {
        "startLine": 603,
        "startChar": 12,
        "endLine": 603,
        "endChar": 28
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c5268ec_3aa627ff",
        "filename": ".zuul.yaml",
        "patchSetId": 11
      },
      "lineNbr": 603,
      "author": {
        "id": 4393
      },
      "writtenOn": "2021-02-08T14:44:10Z",
      "side": 1,
      "message": "Yeah, I think it\u0027s important to run tempest to make sure you haven\u0027t broken the cloud. To be honest, I have yet to have this happen, even locally, while developing this, but I think that as we move into more and more optimizations, it\u0027s important to make sure we\u0027ve got a working cloud at the end.\n\nAs soon as you\u0027re ready to move some tempest job to run this by default (which I think we should do) then moving this to just run devstack is definitely the right plan.",
      "parentUuid": "def7e2b7_25727142",
      "range": {
        "startLine": 603,
        "startChar": 12,
        "endLine": 603,
        "endChar": 28
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f13ca34_b88c3613",
        "filename": ".zuul.yaml",
        "patchSetId": 11
      },
      "lineNbr": 603,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-09T18:16:45Z",
      "side": 1,
      "message": "Then we could just drop it and have the default job use it. Anyhow, I am fine with this if we don\u0027t keep it like this forever.\n\nOoh, and I see I have made a random pun there with \u0027TEMPting to run TEMPest\u0027. I\u0027m getting old... I should\u0027ve caught that!",
      "parentUuid": "9c5268ec_3aa627ff",
      "range": {
        "startLine": 603,
        "startChar": 12,
        "endLine": 603,
        "endChar": 28
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "81653dd4_5b2daf8a",
        "filename": ".zuul.yaml",
        "patchSetId": 11
      },
      "lineNbr": 603,
      "author": {
        "id": 8556
      },
      "writtenOn": "2021-02-09T18:25:46Z",
      "side": 1,
      "message": "yeah, I hope soon we enable the parallelization by default and then we can remove this job entirely.",
      "parentUuid": "4f13ca34_b88c3613",
      "range": {
        "startLine": 603,
        "startChar": 12,
        "endLine": 603,
        "endChar": 28
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db4b7693_ef45af12",
        "filename": "inc/async",
        "patchSetId": 11
      },
      "lineNbr": 80,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-07T10:51:35Z",
      "side": 1,
      "message": "We should control this directory externally.",
      "range": {
        "startLine": 80,
        "startChar": 4,
        "endLine": 80,
        "endChar": 32
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33c10173_91e0efc1",
        "filename": "inc/async",
        "patchSetId": 11
      },
      "lineNbr": 80,
      "author": {
        "id": 4393
      },
      "writtenOn": "2021-02-08T14:44:10Z",
      "side": 1,
      "message": "What does that mean?",
      "parentUuid": "db4b7693_ef45af12",
      "range": {
        "startLine": 80,
        "startChar": 4,
        "endLine": 80,
        "endChar": 32
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "00e8cced_cc0c3f11",
        "filename": "inc/async",
        "patchSetId": 11
      },
      "lineNbr": 80,
      "author": {
        "id": 11604
      },
      "writtenOn": "2021-02-08T15:13:37Z",
      "side": 1,
      "message": "adding a varablie like https://github.com/openstack/devstack/blob/master/stackrc#L48\nwhich can be used to contol the directory that is used to store these files.\n\nASYNC_TASK_DIR\u003d${ASYNC_TASK_DIR:-\"${DEST}/async\"}\n\ngiven this is under dest however im not sure its requried.",
      "parentUuid": "33c10173_91e0efc1",
      "range": {
        "startLine": 80,
        "startChar": 4,
        "endLine": 80,
        "endChar": 32
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "504bee79_2da020e7",
        "filename": "inc/async",
        "patchSetId": 11
      },
      "lineNbr": 80,
      "author": {
        "id": 4393
      },
      "writtenOn": "2021-02-08T15:15:13Z",
      "side": 1,
      "message": "Oh, that\u0027s totally not what I thought he meant. And yeah, agree with you, not sure why we would need to do that.",
      "parentUuid": "00e8cced_cc0c3f11",
      "range": {
        "startLine": 80,
        "startChar": 4,
        "endLine": 80,
        "endChar": 32
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d85db2c2_fe922c71",
        "filename": "inc/async",
        "patchSetId": 11
      },
      "lineNbr": 80,
      "author": {
        "id": 11604
      },
      "writtenOn": "2021-02-08T15:20:56Z",
      "side": 1,
      "message": "well i could be wong but that the only thing i could think of.\n\nperhaps he ment pull the creation fo this out in to an async_init function so that its not created on each invocation?\nthat could also delete it if it already existed to ensure it was created clean once at the start of the devstack run?",
      "parentUuid": "504bee79_2da020e7",
      "range": {
        "startLine": 80,
        "startChar": 4,
        "endLine": 80,
        "endChar": 32
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5780bf40_e725689a",
        "filename": "inc/async",
        "patchSetId": 11
      },
      "lineNbr": 80,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-09T18:16:45Z",
      "side": 1,
      "message": "Yup, I meant the directory should be created once when the stacking starts and removed when it finished cleanly (I mentioned this part of the thought elsewhere, sorry for shady comments; see the other thread now as well).",
      "parentUuid": "d85db2c2_fe922c71",
      "range": {
        "startLine": 80,
        "startChar": 4,
        "endLine": 80,
        "endChar": 32
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87f9e08a_7236d4e8",
        "filename": "inc/async",
        "patchSetId": 11
      },
      "lineNbr": 145,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-07T10:51:35Z",
      "side": 1,
      "message": "I\u0027m an anti-fan of silent failures. I would say we should make the code know whether to wait for something or not rather than wait for everything. Perhaps we could register noops?",
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd612015_44b2fd84",
        "filename": "inc/async",
        "patchSetId": 11
      },
      "lineNbr": 145,
      "author": {
        "id": 11604
      },
      "writtenOn": "2021-02-08T11:46:41Z",
      "side": 1,
      "message": "well how would you do that and allow devstack plugins to wait on async jobs.\n\nthe way its currently structure is as a plugin i can wait on a task that is created by core devstack\nin a pahse before devstack normally would wait. the plug will then continue with its execution yeild back to core devstack and when devstack normally waits it ill get this message.\n\nwe need to support 2 things waiting on the single async task in such a way as to garunette that neither runs until its complete.\n\nthe plugins would never register the task its waiting on in this case its being done by either another plugin or core devstack so im not usre registing a noop would help here. core devstack cant know if a pluging might wait on one of its async task.",
      "parentUuid": "87f9e08a_7236d4e8",
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6cd81270_296d7ce7",
        "filename": "inc/async",
        "patchSetId": 11
      },
      "lineNbr": 145,
      "author": {
        "id": 4393
      },
      "writtenOn": "2021-02-08T14:44:10Z",
      "side": 1,
      "message": "This doesn\u0027t wait for everything, this *is* a no-op. And, it\u0027s not a silent failure.\n\nThis allows us to wait for something in more than one place, and not block or fail on the second. It also lets us wait for things without checking config first. For example, if glance requires cinder to be started first in some situations (which it does), it\u0027s so much cleaner to just let glance say \"I need to stop here until after cinder has started\" without needing to do that only if cinder is configured to run.",
      "parentUuid": "bd612015_44b2fd84",
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c28577b9_59370dfc",
        "filename": "inc/async",
        "patchSetId": 11
      },
      "lineNbr": 145,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-09T18:16:45Z",
      "side": 1,
      "message": "Ack, I see how you want to use it. That might be problematic with my strict approach. I don\u0027t mind it then as I don\u0027t have any good advice on how to handle this without overengineering.",
      "parentUuid": "6cd81270_296d7ce7",
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3924f23e_16331998",
        "filename": "inc/async",
        "patchSetId": 11
      },
      "lineNbr": 146,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-07T10:51:35Z",
      "side": 1,
      "message": "I think it should be \"has already been waited for\" as that is when we delete the ini.",
      "range": {
        "startLine": 146,
        "startChar": 17,
        "endLine": 146,
        "endChar": 37
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15b66b24_03a9086d",
        "filename": "inc/async",
        "patchSetId": 11
      },
      "lineNbr": 146,
      "author": {
        "id": 4393
      },
      "writtenOn": "2021-02-08T14:44:10Z",
      "side": 1,
      "message": "Sure.",
      "parentUuid": "3924f23e_16331998",
      "range": {
        "startLine": 146,
        "startChar": 17,
        "endLine": 146,
        "endChar": 37
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16c6c3ed_bb2ae8d8",
        "filename": "inc/async",
        "patchSetId": 11
      },
      "lineNbr": 146,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-09T18:16:45Z",
      "side": 1,
      "message": "OK, then please amend. ðŸ˜Š",
      "parentUuid": "15b66b24_03a9086d",
      "range": {
        "startLine": 146,
        "startChar": 17,
        "endLine": 146,
        "endChar": 37
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "127d322a_9e68130b",
        "filename": "lib/nova",
        "patchSetId": 11
      },
      "lineNbr": 768,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-07T10:51:35Z",
      "side": 1,
      "message": "This is false now.",
      "range": {
        "startLine": 766,
        "startChar": 60,
        "endLine": 768,
        "endChar": 35
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f080330f_51baf09f",
        "filename": "lib/nova",
        "patchSetId": 11
      },
      "lineNbr": 768,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-09T18:16:45Z",
      "side": 1,
      "message": "So should it be removed? - which means \"we did not want it\"; or should the code work differently?",
      "parentUuid": "127d322a_9e68130b",
      "range": {
        "startLine": 766,
        "startChar": 60,
        "endLine": 768,
        "endChar": 35
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "42db8438_dc1ea9d2",
        "filename": "lib/nova",
        "patchSetId": 11
      },
      "lineNbr": 768,
      "author": {
        "id": 4393
      },
      "writtenOn": "2021-02-09T18:30:52Z",
      "side": 1,
      "message": "Sorry, meant to ack this. Already changed locally :)",
      "parentUuid": "f080330f_51baf09f",
      "range": {
        "startLine": 766,
        "startChar": 60,
        "endLine": 768,
        "endChar": 35
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98b5d3e7_7e98c780",
        "filename": "unstack.sh",
        "patchSetId": 11
      },
      "lineNbr": 187,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-07T10:51:35Z",
      "side": 1,
      "message": "Regarding this directory and its control. I think we should create it and ensure it\u0027s empty on each stack run to avoid confusion. Its contents from the previous run are not that relevant.",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 187,
        "endChar": 18
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9156975_f87d6815",
        "filename": "unstack.sh",
        "patchSetId": 11
      },
      "lineNbr": 187,
      "author": {
        "id": 4393
      },
      "writtenOn": "2021-02-08T14:44:10Z",
      "side": 1,
      "message": "Where do you want me to do that?",
      "parentUuid": "98b5d3e7_7e98c780",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 187,
        "endChar": 18
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b3abb91_7ad63fcf",
        "filename": "unstack.sh",
        "patchSetId": 11
      },
      "lineNbr": 187,
      "author": {
        "id": 11604
      },
      "writtenOn": "2021-02-08T15:20:56Z",
      "side": 1,
      "message": "maybe early in stackrc? im kind of ok with doing it here however.\nunless we move it to an async_init function ?",
      "parentUuid": "e9156975_f87d6815",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 187,
        "endChar": 18
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3d186f0_06293287",
        "filename": "unstack.sh",
        "patchSetId": 11
      },
      "lineNbr": 187,
      "author": {
        "id": 30491
      },
      "writtenOn": "2021-02-09T18:16:45Z",
      "side": 1,
      "message": "For creation - under \"Configure Target Directories\" in stack.sh makes most sense to me (this could be an async_init function invocation).\nFor removal - why not async_cleanup to do it? Dump the details and clean it up.",
      "parentUuid": "4b3abb91_7ad63fcf",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 187,
        "endChar": 18
      },
      "revId": "d362c56cb9085dad014d2e3bebed649edae01461",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    }
  ]
}