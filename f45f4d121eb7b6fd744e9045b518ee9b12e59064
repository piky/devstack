{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "317ece6b_47d9cba7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 29
      },
      "lineNbr": 0,
      "author": {
        "id": 13252
      },
      "writtenOn": "2024-05-10T12:00:30Z",
      "side": 1,
      "message": "wow, long time since I looked at this. some initial comments, for a full review I\u0027d still need to take a deeper look at the socket handling code (that\u0027s more of a note to myself)",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e3e88a82_4d342d56",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 29
      },
      "lineNbr": 0,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-10T14:32:59Z",
      "side": 1,
      "message": "I used it quite a bit a year or so ago when I was doing some stuff that required a bunch of stacking. I don\u0027t normally keep it in place since I have to patch it on top, which is really annoying.\n\nUntil/unless we make it a default, do we really need to scrutinize it (the python code I mean) deeply prior to merge? It clearly works...",
      "parentUuid": "317ece6b_47d9cba7",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6d1316ea_129dd8a6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 29
      },
      "lineNbr": 0,
      "author": {
        "id": 13252
      },
      "writtenOn": "2024-05-13T08:59:38Z",
      "side": 1,
      "message": "So I\u0027m not sure what exactly the plan is for this patch. If you just want to test around with it, please mark it as wip to avoid wasting reviewer time. If you intend for this to be merged, the code should not be too hacky and any remaining open issues should be marked with TODO comments, because otherwise this will not be maintainable,",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dd067248_280e9359",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 29
      },
      "lineNbr": 0,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-13T13:36:19Z",
      "side": 1,
      "message": "I\u0027ve been asking for this to",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f5c57402_e6ab134f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 29
      },
      "lineNbr": 0,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-13T13:36:19Z",
      "side": 1,
      "message": "I\u0027ve been asking to have this merged for a long time, even if it\u0027s not the default. I\u0027d like to be able to use it locally at *least* and it\u0027s not convenient to do that if I have to patch it on top of whatever I\u0027m working on. I\u0027d also advocate for nova and glance jobs to use it where possible as I\u0027ve never seen it cause a problem. The only thing I\u0027ve ever known wasn\u0027t working was the global venv thing I just fixed, and that pretty much broke everything anyway.\n\nThe entire thing is a hack, so I\u0027m not sure what things you want to see changed or marked as TODO, but if you can list them I can consider working on them.",
      "parentUuid": "6d1316ea_129dd8a6",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "519d086f_3db714eb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 29
      },
      "lineNbr": 0,
      "author": {
        "id": 4146
      },
      "writtenOn": "2024-05-13T15:22:16Z",
      "side": 1,
      "message": "Part of the motivation behind this is it allows us to cache keystone tokens in the server/osc shell as well as avoid repeated python startup costs with starting a new osc each run. This in theory will cut minutes off of every devstack job that uses it saving time and resources.",
      "parentUuid": "f5c57402_e6ab134f",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4f094445_a9262ff2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 29
      },
      "lineNbr": 0,
      "author": {
        "id": 4146
      },
      "writtenOn": "2024-05-13T15:22:16Z",
      "side": 1,
      "message": "I\u0027m in favor of this. It appears to be disabled by default and there are indications it will save us resources. We have to consider that the status quo isn\u0027t perfect either (and is extremely user unfriendly with how slow it can be). This improves the user experience and we can improve it along the way without having it be perfect upfront.",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "86618937_1710acc3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 29
      },
      "lineNbr": 0,
      "author": {
        "id": 22873
      },
      "writtenOn": "2024-05-14T12:01:36Z",
      "side": 1,
      "message": "I support any \"speed up\" efforts, it still needs 2 depends-on patches to be merged",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e2324d05_942ee632",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 29
      },
      "lineNbr": 0,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-14T14:26:05Z",
      "side": 1,
      "message": "Yep, I just want to make sure this is *palatable* to be merged, so thanks for your support.",
      "parentUuid": "86618937_1710acc3",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8c4b696c_46543539",
        "filename": "files/openstack-cli-server/openstack",
        "patchSetId": 29
      },
      "lineNbr": 79,
      "author": {
        "id": 13252
      },
      "writtenOn": "2024-05-10T12:00:30Z",
      "side": 1,
      "message": "this list looks pretty random, which I think can lead to surprises. in theory we should be able to only rely on OS_CLOUD by now, maybe a good opportunity to clean up legacy uses?",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ff621b3_eae3dc89",
        "filename": "files/openstack-cli-server/openstack",
        "patchSetId": 29
      },
      "lineNbr": 79,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-10T14:32:59Z",
      "side": 1,
      "message": "Yeah, I dunno, I\u0027d have to try to see if everything works. The potential for breaking someone\u0027s devstack plugin also exists, as I found a couple (like ironic) that needed tweaking.\n\nI don\u0027t think this really hurts anything given the hack job that this is in general :)",
      "parentUuid": "8c4b696c_46543539",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "247428de_f52645d8",
        "filename": "files/openstack-cli-server/openstack",
        "patchSetId": 29
      },
      "lineNbr": 102,
      "author": {
        "id": 4146
      },
      "writtenOn": "2024-05-13T15:22:16Z",
      "side": 1,
      "message": "Is there some reason the osc shell in the server can\u0027t report this error and we have to catch it early here? That might be worth a comment if so.",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9281e64b_ae22fce4",
        "filename": "files/openstack-cli-server/openstack",
        "patchSetId": 29
      },
      "lineNbr": 102,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-13T15:49:46Z",
      "side": 1,
      "message": "Why does it matter? The exceptional case (which used to be different) was always handled here. I think it\u0027s reasonable to keep the server clean and straightforward and consider this to be the \"wedge\" that provides whatever glue the caller needs to see the behavior they expect.\n\nIn case it\u0027s not clear, the problem is that you can\u0027t upload an image by passing the image data to stdin on this client wedge, so we require the file argument as a result. To me, that\u0027s client-based glue/policy, which could be different in the future, without the server needing to know. If there was something specific about the environment, or how it was called that mattered, it\u0027d be this client wedge that would be best positioned to figure out what to do.",
      "parentUuid": "247428de_f52645d8",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "327dad19_adb5b41d",
        "filename": "files/openstack-cli-server/openstack-cli-server",
        "patchSetId": 29
      },
      "lineNbr": 22,
      "author": {
        "id": 13252
      },
      "writtenOn": "2024-05-10T12:00:30Z",
      "side": 1,
      "message": "this seems outdated?",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff451fa5_9efacde1",
        "filename": "files/openstack-cli-server/openstack-cli-server",
        "patchSetId": 29
      },
      "lineNbr": 22,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-10T14:32:59Z",
      "side": 1,
      "message": "Clearly :)",
      "parentUuid": "327dad19_adb5b41d",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "520ed454_fd172dd3",
        "filename": "files/openstack-cli-server/openstack-cli-server",
        "patchSetId": 29
      },
      "lineNbr": 22,
      "author": {
        "id": 22873
      },
      "writtenOn": "2024-05-14T12:01:36Z",
      "side": 1,
      "message": "maybe this could be updated while we\u0027re waiting on depends-on patches",
      "parentUuid": "ff451fa5_9efacde1",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0a418a8_7898ca75",
        "filename": "files/openstack-cli-server/openstack-cli-server",
        "patchSetId": 29
      },
      "lineNbr": 22,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-14T14:26:05Z",
      "side": 1,
      "message": "Yep, I will.",
      "parentUuid": "520ed454_fd172dd3",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "547630e3_0f028b60",
        "filename": "files/openstack-cli-server/openstack-cli-server",
        "patchSetId": 29
      },
      "lineNbr": 22,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-14T14:29:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e0a418a8_7898ca75",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "46c8cd48_4563586e",
        "filename": "functions-common",
        "patchSetId": 29
      },
      "lineNbr": 2442,
      "author": {
        "id": 13252
      },
      "writtenOn": "2024-05-10T12:00:30Z",
      "side": 1,
      "message": "not sure this is needed if the command below uses the full path to the script?",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6a121ab_1c3eefc8",
        "filename": "functions-common",
        "patchSetId": 29
      },
      "lineNbr": 2442,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-10T14:32:59Z",
      "side": 1,
      "message": "This is for the client invocation, so that from here on we find \"openstack\" as the one in `devstack/files/openstack-cli-server` instead of `/usr/local/bin` or `/opt/...`.",
      "parentUuid": "46c8cd48_4563586e",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "733c908e_64d89767",
        "filename": "functions-common",
        "patchSetId": 29
      },
      "lineNbr": 2442,
      "author": {
        "id": 13252
      },
      "writtenOn": "2024-05-13T08:59:38Z",
      "side": 1,
      "message": "Hmm, I would suggest to move it outside of this function, then, to give it more visibility.",
      "parentUuid": "b6a121ab_1c3eefc8",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77a036a4_d3c70613",
        "filename": "functions-common",
        "patchSetId": 29
      },
      "lineNbr": 2442,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-14T14:29:13Z",
      "side": 1,
      "message": "But.. you only want to do this if you\u0027re in this mode. If you don\u0027t start the server then putting this in the path will break everything afterwards because you\u0027ll then be running the special client with no server to talk to.",
      "parentUuid": "733c908e_64d89767",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "85bda257_ee5a2813",
        "filename": "stack.sh",
        "patchSetId": 29
      },
      "lineNbr": 1026,
      "author": {
        "id": 13252
      },
      "writtenOn": "2024-05-10T12:00:30Z",
      "side": 1,
      "message": "Why is this only done on the else path? Seems it will break testing osc patches in unexpected ways\n\nThere was some discussion about depends-on testing in earlier PSs, but I haven\u0027t found a conclusion about that",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6adf7dda_7e0170e2",
        "filename": "stack.sh",
        "patchSetId": 29
      },
      "lineNbr": 1026,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-10T14:32:59Z",
      "side": 1,
      "message": "I assume it\u0027s to avoid using this when we\u0027re actually testing osc itself. But, if we ever turned this on by default they could turn it off on some/all of their jobs if desired.",
      "parentUuid": "85bda257_ee5a2813",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b73f9311_97ef123e",
        "filename": "unstack.sh",
        "patchSetId": 29
      },
      "lineNbr": 102,
      "author": {
        "id": 4146
      },
      "writtenOn": "2024-05-13T15:22:16Z",
      "side": 1,
      "message": "Nit: Should this be the very last service we stop so that any other services that need to use osc during the stop can take advantage of this longer lived faster service for API interaction?",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2ca829fb_a1e3c618",
        "filename": "unstack.sh",
        "patchSetId": 29
      },
      "lineNbr": 102,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-13T15:49:46Z",
      "side": 1,
      "message": "Yep, sure.",
      "parentUuid": "b73f9311_97ef123e",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dc0f8ba7_129b8acd",
        "filename": "unstack.sh",
        "patchSetId": 29
      },
      "lineNbr": 102,
      "author": {
        "id": 4393
      },
      "writtenOn": "2024-05-14T14:29:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2ca829fb_a1e3c618",
      "revId": "f45f4d121eb7b6fd744e9045b518ee9b12e59064",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}