# lib/cinder_plugins/solidfire
# Configure the solidfire driver

# Enable with:
#
#   CINDER_DRIVER=solidfire

# Dependencies:
#
# - ``functions`` file
# - ``cinder`` configurations

# configure_cinder_driver - make configuration changes, including those to other services

# Save trace setting
MY_XTRACE=$(set +o | grep xtrace)
set +o xtrace


# Defaults
# --------

# Set up default directories


# Entry Points
# ------------

# configure_cinder_driver - Set config files, create data dirs, etc
function configure_cinder_driver() {
    # To use solidfire, set the following in localrc:
    # CINDER_DRIVER=solidfire
    # SAN_IP=<mvip>
    # SAN_LOGIN=<cluster-admin-account>
    # SAN_PASSWORD=<cluster-admin-password>

    set -u
    iniset $CINDER_CONF DEFAULT volume_driver "cinder.volume.drivers.solidfire.SolidFireDriver"
    iniset $CINDER_CONF DEFAULT SAN_IP $SAN_IP
    iniset $CINDER_CONF DEFAULT SAN_LOGIN $SAN_LOGIN
    iniset $CINDER_CONF DEFAULT SAN_PASSWORD $SAN_PASSWORD
}

# Restore xtrace
$MY_XTRACE

# Local variables:
# mode: shell-script
# End:
