# Quantum Vpn plugin
# ---------------------------

# Save trace setting
MY_XTRACE=$(set +o | grep xtrace)
set +o xtrace


AGENT_VPN_BINARY="$QUANTUM_DIR/bin/quantum-vpn-agent"
AGENT_VPN_PLUGIN="quantum.plugins.services.agent_vpn.plugin.VpnRpcPlugin"

function quantum_agent_vpn_install_agent_packages() {
    install_package strongswan
}

function quantum_agent_vpn_configure_common() {
    if [[ $Q_SERVICE_PLUGIN_CLASSES == '' ]]; then
        Q_SERVICE_PLUGIN_CLASSES=$AGENT_VPN_PLUGIN
    else
        Q_SERVICE_PLUGIN_CLASSES="$Q_SERVICE_PLUGIN_CLASSES,$AGENT_VPN_PLUGIN"
    fi
}

function _configure_quantum_vpn_agent() {
    AGENT_L3_BINARY="$QUANTUM_DIR/bin/quantum-vpn-agent"
}

# Restore xtrace
$MY_XTRACE
