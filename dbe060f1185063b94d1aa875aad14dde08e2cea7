{
  "comments": [
    {
      "key": {
        "uuid": "baada198_29f9f6c4",
        "filename": "lib/keystone",
        "patchSetId": 5
      },
      "lineNbr": 158,
      "author": {
        "id": 12754
      },
      "writtenOn": "2014-08-04T19:16:03Z",
      "side": 1,
      "message": "Take a look at this: I think we should make sure that mod_ssl is already installed and enabled before writing the \"SSLEngine On\" directive in Apache configuration. Otherwise Apache crashes and the deploy fails.\nTo accomplish this, for example, in Ubuntu and other Debian based distros you can use \"a2enmod\".\nIn Fedora, CentOS and other Red Hat family distros you have to edit httpd.conf un-commenting the appropriate LoadModule line.",
      "revId": "dbe060f1185063b94d1aa875aad14dde08e2cea7",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baada198_13ba90b9",
        "filename": "lib/keystone",
        "patchSetId": 5
      },
      "lineNbr": 158,
      "author": {
        "id": 7662
      },
      "writtenOn": "2014-08-05T03:28:04Z",
      "side": 1,
      "message": "I considered that and at one point used conditionals in Apache to not enable SSL if mod_ssl is not loaded but that too would lead to fail (Keystone wouldn\u0027t be started in SSL mode in that case) so I skipped it.\n\nThe issue is that pure SSL is probably an edge case as most users are probably going to use an SSL terminator (aka TLS Proxy).\n\nAt least in Fedora/CentOS/RHEL if the mod_ssl package is installed, it is enabled by default, so requiring the package is probably good enough for a dev system. I don\u0027t know what the Ubuntu default is.\n\nIs there a way to have devstack-specific requirements? Otherwise we\u0027d have add mod_ssl to the requirements of something, perhaps keystone or horizon, so that we can assume it is already there for devstack, but then that requirement won\u0027t be used in a high percentage of production installations and I\u0027d imagine that those component owners would protest.",
      "parentUuid": "baada198_29f9f6c4",
      "revId": "dbe060f1185063b94d1aa875aad14dde08e2cea7",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baada198_3f266823",
        "filename": "lib/keystone",
        "patchSetId": 5
      },
      "lineNbr": 158,
      "author": {
        "id": 9098
      },
      "writtenOn": "2014-08-05T13:06:48Z",
      "side": 1,
      "message": "It is possible to install conditional dependencies in devstack.  Keystone currently does this for openldap-servers.  Take a look at how install_ldap() is used in lib/keystone.",
      "parentUuid": "baada198_13ba90b9",
      "revId": "dbe060f1185063b94d1aa875aad14dde08e2cea7",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baada198_8252bb10",
        "filename": "lib/keystone",
        "patchSetId": 5
      },
      "lineNbr": 158,
      "author": {
        "id": 12754
      },
      "writtenOn": "2014-08-05T13:20:42Z",
      "side": 1,
      "message": "You are right, most people use tls proxy for development scopes.\n\nBy the way I tried to deploy devstack with this patchset just five minutes ago on a fresh Ubuntu, and it fails because of mod_ssl disabled.\nSo I\u0027ve launched \"clean.sh\", \"sudo a2enmod ssl\", \"stack.sh\" and now it is fine.\nIn Ubuntu mod_ssl is disabled by default even if it is installed.\nTo solve this problem we can add \"sudo a2enmod ssl\" somewhere verifying \"is_ubuntu\" USE_SSL to be \"True\".",
      "parentUuid": "baada198_13ba90b9",
      "revId": "dbe060f1185063b94d1aa875aad14dde08e2cea7",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}