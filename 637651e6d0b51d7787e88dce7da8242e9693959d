{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "bba0b2a6_6f027c73",
        "filename": "lib/tempest",
        "patchSetId": 2
      },
      "lineNbr": 710,
      "author": {
        "id": 4146
      },
      "writtenOn": "2022-12-08T15:44:00Z",
      "side": 1,
      "message": "This line jumps out to me due to the two lines above it. In particular we are taking three steps:\n\n  707. Install tempest and all of its deps into venv-tempest using constraints\n  709. Install tempest and all of its deps into venv-tempest using a possibly different constraints file\n  710. Install tempest and all of its deps without a constraints file\n  \nAdditionally, we only guard line 707 for running offline. I think this effectively means that tempest installations cannot happen during an offline run of devstack.\n\nMy suggestion for fixing this is that we figure out what the install we need/want actually is and perform that in a single line and guard that properly with the offline check.",
      "revId": "637651e6d0b51d7787e88dce7da8242e9693959d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "294af0f6_b047abe3",
        "filename": "lib/tempest",
        "patchSetId": 2
      },
      "lineNbr": 710,
      "author": {
        "id": 4146
      },
      "writtenOn": "2022-12-08T15:45:17Z",
      "side": 1,
      "message": "Sorry for line 709 the action is install all of tempest deps into venv-tempest using a possibly different constraints file. I don\u0027t think that tempest itself is included in this list. But I believe it is for lines 707 and 709.",
      "parentUuid": "bba0b2a6_6f027c73",
      "revId": "637651e6d0b51d7787e88dce7da8242e9693959d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d5d0e29f_5640809c",
        "filename": "lib/tempest",
        "patchSetId": 2
      },
      "lineNbr": 710,
      "author": {
        "id": 9708
      },
      "writtenOn": "2022-12-08T17:10:54Z",
      "side": 1,
      "message": "Then I\u0027m failing to understand while L732 tries to pick tempest from outside of the venv-tempest env.",
      "parentUuid": "294af0f6_b047abe3",
      "revId": "637651e6d0b51d7787e88dce7da8242e9693959d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "be0805ed_184c3450",
        "filename": "lib/tempest",
        "patchSetId": 2
      },
      "lineNbr": 710,
      "author": {
        "id": 8556
      },
      "writtenOn": "2022-12-08T20:16:19Z",
      "side": 1,
      "message": "L732 still passing \u0027tempest\u0027 as a command to tox venv and which is what not in allowlist_externals now.\n\nlet me revise the allowlist_externals and see if that is only where it fail or anywhere also.",
      "parentUuid": "d5d0e29f_5640809c",
      "revId": "637651e6d0b51d7787e88dce7da8242e9693959d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "853e917a_950065a1",
        "filename": "lib/tempest",
        "patchSetId": 2
      },
      "lineNbr": 710,
      "author": {
        "id": 8556
      },
      "writtenOn": "2022-12-08T21:04:38Z",
      "side": 1,
      "message": "I agree that we should not need L710 as tempest is installed in venv-tempest.",
      "parentUuid": "be0805ed_184c3450",
      "revId": "637651e6d0b51d7787e88dce7da8242e9693959d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db7748af_e6b383b9",
        "filename": "lib/tempest",
        "patchSetId": 2
      },
      "lineNbr": 710,
      "author": {
        "id": 4146
      },
      "writtenOn": "2022-12-09T20:47:56Z",
      "side": 1,
      "message": "\u003e Then I\u0027m failing to understand while L732 tries to pick tempest from outside of the venv-tempest env.\n\nBecause it is a different environment. The venv environment installs to .tox/venv (default envdir). The venv-tempest environment installs to .tox/tempest (overridden envdir in the tox.ini).",
      "parentUuid": "853e917a_950065a1",
      "revId": "637651e6d0b51d7787e88dce7da8242e9693959d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4624e4f_7e88af41",
        "filename": "lib/tempest",
        "patchSetId": 2
      },
      "lineNbr": 710,
      "author": {
        "id": 8556
      },
      "writtenOn": "2022-12-09T22:07:42Z",
      "side": 1,
      "message": "yeah that is true but gibi question was when he changed L732 to use \u0027venv-tempest\u0027\n\n    tox -evenv-tempest -- tempest verify-config -uro $tmp_cfg_file\n    \nbut still tox cannot find \u0027tempest\u0027 in \u0027venv-tempest and consider as external command and fail. Which is what the issue we are facing here.",
      "parentUuid": "db7748af_e6b383b9",
      "revId": "637651e6d0b51d7787e88dce7da8242e9693959d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7bb44d64_f45cbd4c",
        "filename": "lib/tempest",
        "patchSetId": 2
      },
      "lineNbr": 732,
      "author": {
        "id": 8556
      },
      "writtenOn": "2022-12-08T21:04:38Z",
      "side": 1,
      "message": "this was bug and it seems it is fixed with this change. now  verify-config is running fine-  https://zuul.opendev.org/t/openstack/build/aaad7312f68246c0979e1a43cfe96c3b/log/job-output.txt#22469",
      "range": {
        "startLine": 732,
        "startChar": 0,
        "endLine": 732,
        "endChar": 66
      },
      "revId": "637651e6d0b51d7787e88dce7da8242e9693959d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33596416_99c40f04",
        "filename": "lib/tempest",
        "patchSetId": 2
      },
      "lineNbr": 732,
      "author": {
        "id": 8556
      },
      "writtenOn": "2022-12-08T21:04:38Z",
      "side": 1,
      "message": "let me try this again and with grenade job fix on stable/zed devstack",
      "revId": "637651e6d0b51d7787e88dce7da8242e9693959d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8819f0ac_2e56836e",
        "filename": "lib/tempest",
        "patchSetId": 2
      },
      "lineNbr": 732,
      "author": {
        "id": 8556
      },
      "writtenOn": "2022-12-08T22:38:07Z",
      "side": 1,
      "message": "I referred the PS2 results while commenting the above observation where gibi added the tempest installation at L710. changing only L732 has the same issue of not finding \u0027tempest\u0027 in venv-tempest venv.",
      "parentUuid": "7bb44d64_f45cbd4c",
      "range": {
        "startLine": 732,
        "startChar": 0,
        "endLine": 732,
        "endChar": 66
      },
      "revId": "637651e6d0b51d7787e88dce7da8242e9693959d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9b43277_bd779478",
        "filename": "lib/tempest",
        "patchSetId": 2
      },
      "lineNbr": 732,
      "author": {
        "id": 8556
      },
      "writtenOn": "2022-12-09T02:58:02Z",
      "side": 1,
      "message": "even same \u0027tempest\u0027 command @L715 also failing in separate job https://zuul.opendev.org/t/openstack/build/2c3757b6a64347898e630b6c129f0582",
      "parentUuid": "8819f0ac_2e56836e",
      "range": {
        "startLine": 732,
        "startChar": 0,
        "endLine": 732,
        "endChar": 66
      },
      "revId": "637651e6d0b51d7787e88dce7da8242e9693959d",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}