{
  "comments": [
    {
      "key": {
        "uuid": "3afb71cf_a4536ce1",
        "filename": "lib/neutron-legacy",
        "patchSetId": 1
      },
      "lineNbr": 711,
      "author": {
        "id": 748
      },
      "writtenOn": "2015-06-10T04:24:21Z",
      "side": 1,
      "message": "I don\u0027t think this setup belongs to the l2 agent startup. This is stuff that needs to be done on the \u0027controller\u0027 node. I\u0027d be extra careful.",
      "revId": "09b94603bb4f903616da3b1b4970ee1e2a666b91",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3afb71cf_f100f203",
        "filename": "lib/neutron-legacy",
        "patchSetId": 1
      },
      "lineNbr": 711,
      "author": {
        "id": 1561
      },
      "writtenOn": "2015-06-10T12:33:13Z",
      "side": 1,
      "message": "Thanks!  I\u0027ll move it.",
      "parentUuid": "3afb71cf_a4536ce1",
      "revId": "09b94603bb4f903616da3b1b4970ee1e2a666b91",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3afb71cf_43aedde6",
        "filename": "lib/neutron-legacy",
        "patchSetId": 1
      },
      "lineNbr": 711,
      "author": {
        "id": 1561
      },
      "writtenOn": "2015-06-10T12:35:32Z",
      "side": 1,
      "message": "There\u0027s no such thing as \"controller node\" in devstack, though.  I guess it could be tied to wherever the l3 agent is running?",
      "parentUuid": "3afb71cf_f100f203",
      "revId": "09b94603bb4f903616da3b1b4970ee1e2a666b91",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3afb71cf_a6f23f04",
        "filename": "lib/neutron-legacy",
        "patchSetId": 1
      },
      "lineNbr": 711,
      "author": {
        "id": 1561
      },
      "writtenOn": "2015-06-10T12:52:56Z",
      "side": 1,
      "message": "Nevermind, that doesn\u0027t make sense.  This stuff doesn\u0027t run unless Q_L3_ENABLED is False.\n\nSo, it still seems to me like this is tied to where the L2 agent is running ...",
      "parentUuid": "3afb71cf_43aedde6",
      "revId": "09b94603bb4f903616da3b1b4970ee1e2a666b91",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3afb71cf_79b2a8e6",
        "filename": "lib/neutron-legacy",
        "patchSetId": 1
      },
      "lineNbr": 711,
      "author": {
        "id": 105
      },
      "writtenOn": "2015-06-10T13:21:41Z",
      "side": 1,
      "message": "Provider networks need to be on all nodes running the L2 agent, so I think Russell is correct here.",
      "parentUuid": "3afb71cf_a6f23f04",
      "revId": "09b94603bb4f903616da3b1b4970ee1e2a666b91",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3afb71cf_80003203",
        "filename": "lib/neutron-legacy",
        "patchSetId": 1
      },
      "lineNbr": 711,
      "author": {
        "id": 748
      },
      "writtenOn": "2015-06-10T21:08:58Z",
      "side": 1,
      "message": "Usually this is the naming convention that I find in use (for instance [1])\n\n- controller node: runs neutron-server, the other API services, conductors, schedulers etc\n- network node: the one that runs central services like DHCP and L3.\n\nNow in single deployments everything is crammed in a single box so the distinctions are blurred. Bear in mind that you\u0027d need to run an L2 agent on the network Node too, as it\u0027s needed for instance by the DHCP agent.\n\nMoving the logic as being done here looks a bit odd to me, especially when it was all in one, so it\u0027s not clear what belongs to what. If you\u0027re confident that it makes sense...then I am yay, but I wouldn\u0027t take it so lightly, that\u0027s all!\n\nA method that is called \u0027start_neutron_agents\u0027 implicitly assumes that you\u0027re running all in one box, and breaking stuff apart can be tricky especially if we can\u0027t validate if this works on a multi-node deployment.\n\n[1] http://docs.openstack.org/havana/install-guide/install/apt/content/ch_overview.html",
      "parentUuid": "3afb71cf_79b2a8e6",
      "revId": "09b94603bb4f903616da3b1b4970ee1e2a666b91",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3afb71cf_83b83c12",
        "filename": "lib/neutron-legacy",
        "patchSetId": 1
      },
      "lineNbr": 711,
      "author": {
        "id": 748
      },
      "writtenOn": "2015-06-10T21:13:38Z",
      "side": 1,
      "message": "Have you considered having this its own function and be called in start_neutron_agents line 751? It seems more functionally equivalent taking into account the other refactoring you\u0027re making.",
      "parentUuid": "3afb71cf_80003203",
      "revId": "09b94603bb4f903616da3b1b4970ee1e2a666b91",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3afb71cf_238188fb",
        "filename": "lib/neutron-legacy",
        "patchSetId": 1
      },
      "lineNbr": 711,
      "author": {
        "id": 1561
      },
      "writtenOn": "2015-06-10T21:20:06Z",
      "side": 1,
      "message": "Well, I could split it out, but as far as I can tell this code needs to run in every case where the L2 agent is running and no cases where the L2 agent is not running, so this is a convenient place to put it.  If it was its own function, I think it would make sense to call it from here anyway.",
      "parentUuid": "3afb71cf_80003203",
      "revId": "09b94603bb4f903616da3b1b4970ee1e2a666b91",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}