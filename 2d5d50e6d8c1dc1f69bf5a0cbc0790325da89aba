{
  "comments": [
    {
      "key": {
        "uuid": "3f79a3b5_8931a259",
        "filename": "lib/tls",
        "patchSetId": 1
      },
      "lineNbr": 509,
      "author": {
        "id": 6873
      },
      "writtenOn": "2018-12-13T13:45:20Z",
      "side": 1,
      "message": "I wonder if we\u0027re even hitting this code, because for nova, this is only called if NOVA_USE_MOD_WSGI\u003dFalse (it defaults to true) and if the tls-proxy service is enabled (which it\u0027s not by default in stackrc). I think we only get tls-proxy enabled by default, if at all, when using devstack-gate for legacy jobs:\n\nhttps://github.com/openstack-infra/devstack-gate/blob/d2bd6faf5ecffbebe8eb721b7fb1bc366ca4bd9a/roles/test-matrix/files/features.yaml#L204\n\nWhich would exclude the tempest-full* jobs since those are zuulv3 now.",
      "range": {
        "startLine": 509,
        "startChar": 9,
        "endLine": 509,
        "endChar": 24
      },
      "revId": "2d5d50e6d8c1dc1f69bf5a0cbc0790325da89aba",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3f79a3b5_a9781ef6",
        "filename": "lib/tls",
        "patchSetId": 1
      },
      "lineNbr": 509,
      "author": {
        "id": 6873
      },
      "writtenOn": "2018-12-13T13:47:50Z",
      "side": 1,
      "message": "Looking at a recent tempest-full run, it looks like that job explicitly enables tls-proxy:\n\nhttp://logs.openstack.org/16/624716/2/check/tempest-full/5943d1e/controller/logs/local_conf.txt\n\nBut *not* NOVA_USE_MOD_WSGI so I\u0027m not sure that we\u0027re using this code.",
      "parentUuid": "3f79a3b5_8931a259",
      "range": {
        "startLine": 509,
        "startChar": 9,
        "endLine": 509,
        "endChar": 24
      },
      "revId": "2d5d50e6d8c1dc1f69bf5a0cbc0790325da89aba",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3f79a3b5_84c3c731",
        "filename": "lib/tls",
        "patchSetId": 1
      },
      "lineNbr": 509,
      "author": {
        "id": 13252
      },
      "writtenOn": "2018-12-13T14:22:58Z",
      "side": 1,
      "message": "This code isn\u0027t used directly, but write_uwsgi_config from lib/apache also generates some snippets that ProxyPass the corresponding locations like \"/compute\" to the correct unix socket.\n\nThough actually I\u0027m not sure whether the SetEnv takes effect on those or might need to be moved outside of the VirtualHost maybe.",
      "parentUuid": "3f79a3b5_a9781ef6",
      "range": {
        "startLine": 509,
        "startChar": 9,
        "endLine": 509,
        "endChar": 24
      },
      "revId": "2d5d50e6d8c1dc1f69bf5a0cbc0790325da89aba",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3f79a3b5_89052210",
        "filename": "lib/tls",
        "patchSetId": 1
      },
      "lineNbr": 542,
      "author": {
        "id": 6873
      },
      "writtenOn": "2018-12-13T13:13:56Z",
      "side": 1,
      "message": "I wonder if this should be:\n\nSetEnv proxy-nokeepalive 1\n\nBecause we still see this a ton:\n\nhttp://status.openstack.org/elastic-recheck/#1763070",
      "revId": "2d5d50e6d8c1dc1f69bf5a0cbc0790325da89aba",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3f79a3b5_e4207b08",
        "filename": "lib/tls",
        "patchSetId": 1
      },
      "lineNbr": 542,
      "author": {
        "id": 13252
      },
      "writtenOn": "2018-12-13T14:22:58Z",
      "side": 1,
      "message": "As commented on IRC, I\u0027m fine to add that, too, but in a dedicated patch so that we can judge the effect of each change separately.",
      "parentUuid": "3f79a3b5_89052210",
      "revId": "2d5d50e6d8c1dc1f69bf5a0cbc0790325da89aba",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}