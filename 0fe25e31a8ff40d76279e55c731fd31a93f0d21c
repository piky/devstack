{
  "comments": [
    {
      "key": {
        "uuid": "7faddb67_1b5e1376",
        "filename": "lib/tls",
        "patchSetId": 3
      },
      "lineNbr": 238,
      "author": {
        "id": 8556
      },
      "writtenOn": "2019-08-13T10:02:24Z",
      "side": 1,
      "message": "this is set as SERVICE_HOST which will be HOST_IPV6 when SERVICE_IP_VERSION is configured as 6. stacrc adjust the SERVICE_HOST HOST_IP or HOST_IPV6 based on SERVICE_IP_VERSION.\n\nSERVICE_IP_VERSION is var to tell devstack to deploy services over IPv6 or IPv4. So setting SERVICE_IP_VERSION to 6 should do tls on HOST_IPv6 automatically Or you want to test the tls with ipv6 even other services are deployed on Ipv4 by devstack? if so then this lgtm.",
      "range": {
        "startLine": 238,
        "startChar": 25,
        "endLine": 238,
        "endChar": 31
      },
      "revId": "0fe25e31a8ff40d76279e55c731fd31a93f0d21c",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7faddb67_e1d6e453",
        "filename": "lib/tls",
        "patchSetId": 3
      },
      "lineNbr": 238,
      "author": {
        "id": 11655
      },
      "writtenOn": "2019-08-13T11:41:33Z",
      "side": 1,
      "message": "When I started down the path of ensuring that an IP was populated, it ended up being when I was setting IP_VERSION to 6, although I\u0027ve since learned there is apparently a 6+4 option to that as well. I may have found SERVICE_IP_VERSION, but regardless I always seemed to find myself with mixed stacks so maybe I was just doing it wrong, but what I was ultimately trying to do was run ipv6 with ironic and we were hitting the lack of validation on one of the socket connections where the endpoint in keystone was registered as the v4 address, but the socket was bound to a v6 socket on ::.",
      "parentUuid": "7faddb67_1b5e1376",
      "range": {
        "startLine": 238,
        "startChar": 25,
        "endLine": 238,
        "endChar": 31
      },
      "revId": "0fe25e31a8ff40d76279e55c731fd31a93f0d21c",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7faddb67_fd15169c",
        "filename": "lib/tls",
        "patchSetId": 3
      },
      "lineNbr": 238,
      "author": {
        "id": 8556
      },
      "writtenOn": "2019-08-14T11:14:42Z",
      "side": 1,
      "message": "Thanks for the clarification. \n\nHOST_IPV6 will be set automatically always (irrespective of SERVICE_IP_VERISION or IP_VERSION ) as long as there is ipv6 nic on the system [1]. I am not sure if any issue on adding ipv6 also always but we can at least check on some tls-proxy enabled job (nova-next is one i know).\n\nDo you want to add ipv6 address in TLS_IP always or only when devstack is asked to configure for IPv6? \nSERVICE_IP_VERISION does not support dual-stack as of now. it can be either deploy the services on ipv4 or ipv6. \n\n[1] https://github.com/openstack/devstack/blob/1f6bea1768c2066f3dd5604aee569ad633f45fbc/stackrc#L862",
      "parentUuid": "7faddb67_e1d6e453",
      "range": {
        "startLine": 238,
        "startChar": 25,
        "endLine": 238,
        "endChar": 31
      },
      "revId": "0fe25e31a8ff40d76279e55c731fd31a93f0d21c",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}