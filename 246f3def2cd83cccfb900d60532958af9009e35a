{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d7d8c0f0_ee8cfead",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 13252
      },
      "writtenOn": "2022-04-22T12:30:01Z",
      "side": 1,
      "message": "IMO we really should drop unstack.sh since it is untested.",
      "revId": "246f3def2cd83cccfb900d60532958af9009e35a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "db516bce_269df448",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 4393
      },
      "writtenOn": "2022-04-22T15:00:54Z",
      "side": 1,
      "message": "I did test this ... but not with a real $DEST, so my bad...\n",
      "revId": "246f3def2cd83cccfb900d60532958af9009e35a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "62965e6f_f896971b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 4393
      },
      "writtenOn": "2022-04-22T15:00:54Z",
      "side": 1,
      "message": "I use unstack all the time. What is the alternative? I always unstack \u0026\u0026 clean. Are you suggesting clean is enough, or that we shouldn\u0027t have either?",
      "parentUuid": "d7d8c0f0_ee8cfead",
      "revId": "246f3def2cd83cccfb900d60532958af9009e35a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "98a8aba9_3f383196",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 13252
      },
      "writtenOn": "2022-04-22T15:40:03Z",
      "side": 1,
      "message": "\u003e I use unstack all the time. What is the alternative? I always unstack \u0026\u0026 clean. Are you suggesting clean is enough, or that we shouldn\u0027t have either?\n\nThe alternative would be to start with a fresh instance again. The other option would be to build a job that actually tests a full stack/unstack/stack cycle, there was some attempt at that some time ago but I think it has been abandoned.",
      "parentUuid": "62965e6f_f896971b",
      "revId": "246f3def2cd83cccfb900d60532958af9009e35a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "92b3b79f_ac11ebb3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 4393
      },
      "writtenOn": "2022-04-22T16:59:25Z",
      "side": 1,
      "message": "Well, for those of us that run it on bare metal, that\u0027s not really an alternative. At least gibi and myself, but I suspect we\u0027re not the only ones :)\n\nI think it\u0027s okay to say that unstack/clean are not really tested, but if we have to have a job to test them in order to clean them, then fine. But there are other things in the devstack tree that aren\u0027t tested but that we keep for good reason.",
      "parentUuid": "98a8aba9_3f383196",
      "revId": "246f3def2cd83cccfb900d60532958af9009e35a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f1692263_7ddf769e",
        "filename": "functions-common",
        "patchSetId": 1
      },
      "lineNbr": 686,
      "author": {
        "id": 13252
      },
      "writtenOn": "2022-04-22T12:30:01Z",
      "side": 1,
      "message": "Not directly related, but this \"--add\" should also be removed, since it will add duplicate entries when the stack.sh run is interrupted/failing and restarted. Maybe you can add this to this patch, so we can backport in one piece.",
      "range": {
        "startLine": 686,
        "startChar": 29,
        "endLine": 686,
        "endChar": 35
      },
      "revId": "246f3def2cd83cccfb900d60532958af9009e35a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33a57a70_f1083f17",
        "filename": "unstack.sh",
        "patchSetId": 1
      },
      "lineNbr": 188,
      "author": {
        "id": 13252
      },
      "writtenOn": "2022-04-22T12:30:01Z",
      "side": 1,
      "message": "This also doesn\u0027t work for me:\n\nsed: -e expression #1, char 3: extra characters after command\n\nAlso, the entries I have look like:\n\n    directory \u003d /opt/stack/neutron\n\nMaybe we should rather use the same mechanism we use to create these entries?\n\nsudo git config --system --unset-all safe.directory \"$DEST\"\n\nworks fine in my local testing.",
      "revId": "246f3def2cd83cccfb900d60532958af9009e35a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fafa4165_e6c2fe9b",
        "filename": "unstack.sh",
        "patchSetId": 1
      },
      "lineNbr": 188,
      "author": {
        "id": 4393
      },
      "writtenOn": "2022-04-22T15:00:54Z",
      "side": 1,
      "message": "\u003e Maybe we should rather use the same mechanism we use to create these entries?\n\u003e \n\u003e sudo git config --system --unset-all safe.directory \"$DEST\"\n\u003e \n\u003e works fine in my local testing.\n\nI tried this locally and it removes *all* of the safe items, even ones not in the $DEST, which I think we should not do, especially against the system list. That might have been on my bionic system when I was validating the backport, but unless you know that I missed that somehow, I don\u0027t think we should use this approach.",
      "parentUuid": "33a57a70_f1083f17",
      "revId": "246f3def2cd83cccfb900d60532958af9009e35a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "38316483_570df833",
        "filename": "unstack.sh",
        "patchSetId": 1
      },
      "lineNbr": 188,
      "author": {
        "id": 17685
      },
      "writtenOn": "2022-04-22T19:39:12Z",
      "side": 1,
      "message": "on old ubuntu/bash this worked: \"\\+directory \u003d ${DEST}+ d\" for me, though i haven\u0027t tested it with focal.",
      "parentUuid": "fafa4165_e6c2fe9b",
      "revId": "246f3def2cd83cccfb900d60532958af9009e35a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9048ad18_83d654d1",
        "filename": "unstack.sh",
        "patchSetId": 1
      },
      "lineNbr": 188,
      "author": {
        "id": 11655
      },
      "writtenOn": "2022-04-23T00:10:59Z",
      "side": 1,
      "message": "seems to work on Jammy",
      "parentUuid": "38316483_570df833",
      "revId": "246f3def2cd83cccfb900d60532958af9009e35a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}