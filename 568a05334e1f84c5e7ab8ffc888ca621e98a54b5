{
  "comments": [
    {
      "key": {
        "uuid": "baada198_58d4a44a",
        "filename": "docs/source/guides/multinode-lab.html",
        "patchSetId": 4
      },
      "lineNbr": 189,
      "author": {
        "id": 9200
      },
      "writtenOn": "2014-08-08T05:28:07Z",
      "side": 1,
      "message": "I think you need the following, too.\n\nVNCSERVER_LISTEN\u003d$HOST_IP\nVNCSERVER_PROXYCLIENT_ADDRESS\u003d$HOST_IP",
      "revId": "568a05334e1f84c5e7ab8ffc888ca621e98a54b5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baada198_95a981df",
        "filename": "docs/source/guides/multinode-lab.html",
        "patchSetId": 4
      },
      "lineNbr": 189,
      "author": {
        "id": 7175
      },
      "writtenOn": "2014-08-08T21:42:04Z",
      "side": 1,
      "message": "Compute nodes will run their own VNC setup in most cases, so taking the default here should be fine (it defaults to 127.0.0.1).",
      "parentUuid": "baada198_58d4a44a",
      "revId": "568a05334e1f84c5e7ab8ffc888ca621e98a54b5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baada198_d60b7f7a",
        "filename": "docs/source/guides/multinode-lab.html",
        "patchSetId": 4
      },
      "lineNbr": 189,
      "author": {
        "id": 9200
      },
      "writtenOn": "2014-08-13T08:14:51Z",
      "side": 1,
      "message": "If a VNC server is listening on 127.0.0.1, you need a VNC proxy on that host, right?\n\nIn this example, no VNC proxy is run on the compute host, so VNC servers should be listening on an address that is accessible from a VNC proxy on a different host.",
      "parentUuid": "baada198_95a981df",
      "revId": "568a05334e1f84c5e7ab8ffc888ca621e98a54b5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baada198_eab08c8f",
        "filename": "docs/source/guides/multinode-lab.html",
        "patchSetId": 4
      },
      "lineNbr": 189,
      "author": {
        "id": 7175
      },
      "writtenOn": "2014-08-13T13:43:37Z",
      "side": 1,
      "message": "\u003e If a VNC server is listening on 127.0.0.1, you need a VNC proxy on that host, right?\n\nNope.  That\u0027s the entire purpose of this patch.  Perhaps it would help to look at an almost-working two-node (controller/compute) deployment (pre my changes): http://paste.openstack.org/show/86945/\n\nIf you test this, everything will be working except for VNC connectivity.  Adding n-novnc to the list of ENABLED_SERVICES on the compute will fix this, but note that in doing so we do *not* need to change the proxy URL locations.  This is because the proxy is already running on the controller, and so the local instance can be ignored.\n\nMy patches remote the need to run the VNC proxy locally on the compute nodes, since it is not needed.  Please attempt a deployment if you still believe this does not work; I can provide working local.conf files if needed.",
      "parentUuid": "baada198_d60b7f7a",
      "revId": "568a05334e1f84c5e7ab8ffc888ca621e98a54b5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ac7a964_a420a09c",
        "filename": "docs/source/guides/multinode-lab.html",
        "patchSetId": 4
      },
      "lineNbr": 189,
      "author": {
        "id": 9200
      },
      "writtenOn": "2014-08-14T06:39:50Z",
      "side": 1,
      "message": "First, your http://paste.openstack.org/show/86945/ disagrees with this example.  The former is almost what I suggested in the earlier comment.\n\nSecond, I tried without VNCSERVER_LISTEN nor VNCSERVER_PROXYCLIENT_ADDRESS as written in this multinode-lab.html.  I got a wrong VNC console.  If those variables are default (127.0.0.1) for a compute node, novncproxy on the controller node cannot connect to a qemu\u0027s VNC port on the compute node.\n\nAlso, you don\u0027t need the NOVNC_PROXYURL line. It is a typo for NOVNCPROXY_URL and the value suggested here is the same as the default value.",
      "parentUuid": "baada198_eab08c8f",
      "revId": "568a05334e1f84c5e7ab8ffc888ca621e98a54b5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baada198_b846a07c",
        "filename": "lib/nova",
        "patchSetId": 4
      },
      "lineNbr": 93,
      "author": {
        "id": 9200
      },
      "writtenOn": "2014-08-08T05:28:07Z",
      "side": 1,
      "message": "I don\u0027t think this variable is needed. (see other comments)",
      "revId": "568a05334e1f84c5e7ab8ffc888ca621e98a54b5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baada198_d5413937",
        "filename": "lib/nova",
        "patchSetId": 4
      },
      "lineNbr": 93,
      "author": {
        "id": 7175
      },
      "writtenOn": "2014-08-08T21:42:04Z",
      "side": 1,
      "message": "I do not agree.  (see other comments)",
      "parentUuid": "baada198_b846a07c",
      "revId": "568a05334e1f84c5e7ab8ffc888ca621e98a54b5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baada198_d8627414",
        "filename": "lib/nova",
        "patchSetId": 4
      },
      "lineNbr": 510,
      "author": {
        "id": 9200
      },
      "writtenOn": "2014-08-08T05:28:07Z",
      "side": 1,
      "message": "I suggest changing this conditional to\n\n    [ -n \"VNCSERVER_LISTEN\" ]\n\nas VNCSERVER_LISTEN and VNCSERVER_PROXYCLIENT_ADDRESS need to be set in order to make the multi-node setup work.",
      "revId": "568a05334e1f84c5e7ab8ffc888ca621e98a54b5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baada198_953b41c7",
        "filename": "lib/nova",
        "patchSetId": 4
      },
      "lineNbr": 510,
      "author": {
        "id": 7175
      },
      "writtenOn": "2014-08-08T21:42:04Z",
      "side": 1,
      "message": "While they do need to be set in order to make it work, them being set does not imply a multinode setup.",
      "parentUuid": "baada198_d8627414",
      "revId": "568a05334e1f84c5e7ab8ffc888ca621e98a54b5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baada198_38fe103a",
        "filename": "lib/nova",
        "patchSetId": 4
      },
      "lineNbr": 514,
      "author": {
        "id": 9200
      },
      "writtenOn": "2014-08-08T05:28:07Z",
      "side": 1,
      "message": "I think it makes more sense to change this line to (or vice versa):\n\n   VNCSERVER_PROXYCLIENT_ADDRESS\u003d${VNCSERVER_PROXYCLIENT_ADDRESS:-$VNCSERVER_LISTEN}",
      "revId": "568a05334e1f84c5e7ab8ffc888ca621e98a54b5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baada198_c8f7ff8c",
        "filename": "lib/nova",
        "patchSetId": 4
      },
      "lineNbr": 514,
      "author": {
        "id": 6854
      },
      "writtenOn": "2014-08-08T08:46:09Z",
      "side": 1,
      "message": "probably $HOST_IP would be a better default for these?",
      "parentUuid": "baada198_38fe103a",
      "revId": "568a05334e1f84c5e7ab8ffc888ca621e98a54b5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baada198_55560906",
        "filename": "lib/nova",
        "patchSetId": 4
      },
      "lineNbr": 514,
      "author": {
        "id": 7175
      },
      "writtenOn": "2014-08-08T21:42:04Z",
      "side": 1,
      "message": "I think changing these is beyond the scope of this patch, though I could be persuaded otherwise.",
      "parentUuid": "baada198_c8f7ff8c",
      "revId": "568a05334e1f84c5e7ab8ffc888ca621e98a54b5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}