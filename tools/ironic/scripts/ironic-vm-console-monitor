#!/bin/bash

console_log=$1
out=$2

if [ ! -f $console_log ] ; then
    echo "Waiting for Ironic node console log at $console_log"
    while [ ! -f $console_log ] ; do
        sleep 1
    done
fi

if [ -n "$out" ] ; then
    echo "Monitoring $console_log at $out"
    sudo tail -f $console_log >> $out
else
    sudo tail -f $console_log
fi
