{
  "comments": [
    {
      "key": {
        "uuid": "96ceaec8_20b9f4cf",
        "filename": ".zuul.yaml",
        "patchSetId": 5
      },
      "lineNbr": 474,
      "author": {
        "id": 13252
      },
      "writtenOn": "2021-05-17T10:40:33Z",
      "side": 1,
      "message": "Any reason not to make these four options default, too?",
      "revId": "65d805fa186ddf6c64d1bb2c150e6a8f50c0bbf5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1985dc3_93c783b0",
        "filename": ".zuul.yaml",
        "patchSetId": 5
      },
      "lineNbr": 474,
      "author": {
        "id": 6469
      },
      "writtenOn": "2021-05-17T11:37:32Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "96ceaec8_20b9f4cf",
      "revId": "65d805fa186ddf6c64d1bb2c150e6a8f50c0bbf5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "41277e90_f160ba67",
        "filename": ".zuul.yaml",
        "patchSetId": 5
      },
      "lineNbr": 474,
      "author": {
        "id": 6469
      },
      "writtenOn": "2021-05-17T12:20:52Z",
      "side": 1,
      "message": "In case these options are made default, please consider implications outside Zuul CI. In my local lab, the deployment failed and I had to manually set PUBLIC_NETWORK_GATEWAY.",
      "parentUuid": "b1985dc3_93c783b0",
      "revId": "65d805fa186ddf6c64d1bb2c150e6a8f50c0bbf5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "240243f7_e1a7c786",
        "filename": ".zuul.yaml",
        "patchSetId": 5
      },
      "lineNbr": 488,
      "author": {
        "id": 13252
      },
      "writtenOn": "2021-05-17T10:40:33Z",
      "side": 1,
      "message": "I see this as a pretty severe regression in collecting data about devstack runs. Do you have any plans on working on this other than hoping for Ubuntu to fix it? I\u0027m also not convinced that this is actually the same issue, since afaict we do not suspend test instances.",
      "revId": "65d805fa186ddf6c64d1bb2c150e6a8f50c0bbf5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "38377ee8_c5f05eb7",
        "filename": ".zuul.yaml",
        "patchSetId": 5
      },
      "lineNbr": 488,
      "author": {
        "id": 6469
      },
      "writtenOn": "2021-05-17T11:37:32Z",
      "side": 1,
      "message": "+1. All devstack-based CI jobs across all OpenStack projects would cease to run dstat which comes very handy when troubleshooting issues. Although, dstat development has been terminated. Is there a replacement tool proposed?",
      "parentUuid": "240243f7_e1a7c786",
      "revId": "65d805fa186ddf6c64d1bb2c150e6a8f50c0bbf5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "35db1177_af665bb0",
        "filename": ".zuul.yaml",
        "patchSetId": 5
      },
      "lineNbr": 488,
      "author": {
        "id": 6469
      },
      "writtenOn": "2021-05-17T11:43:17Z",
      "side": 1,
      "message": "FYI, Lucas is testing the re-enablement of dstat in the multinode OVN jobs\nhttps://review.opendev.org/c/openstack/neutron/+/791720",
      "parentUuid": "38377ee8_c5f05eb7",
      "revId": "65d805fa186ddf6c64d1bb2c150e6a8f50c0bbf5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfe60edb_6ef1edcb",
        "filename": ".zuul.yaml",
        "patchSetId": 5
      },
      "lineNbr": 488,
      "author": {
        "id": 6773
      },
      "writtenOn": "2021-05-17T12:28:11Z",
      "side": 1,
      "message": "Thanks Carlos, Dr. Jens.\n\nUnfortunately dstat is still broken: https://storage.gra.cloud.ovh.net/v1/AUTH_dcaab5e32b234d56b626f72581e3644c/zuul_opendev_logs_033/791720/1/check/neutron-ovn-tempest-slow/033255f/controller/logs/screen-dstat.txt\n\nThis bug in particular has been open for quite some time [0] but it hasn\u0027t been fixed and probably never will because as Carlos mentioned dstat is no longer maintained.\n\nI am not entirely sure how to proceed here other than disabling this service temporarily until we find an alternative service for collecting these stats.\n\nI took the initiative to look at some alternatives, there\u0027s a direct fork from dstat called \"dool\" [1] but I am not sure it\u0027s being maintained either, the last commit seems quite old even tho there\u0027s nothing in the README indicating that the project is no longer maintained.\n\nAnother alternative I found is a project called \"glances\" [2] this looks promising and seems to be well maintained. I have no experience using it but it\u0027s something I can look at implementing in DevStack.\n\nThat all said, is disabling dstat a blocker here or could we for the sake of this Neutron effort have it temporarily disabled ? \n\n[0] https://bugs.launchpad.net/ubuntu/+source/dstat/+bug/1866619\n[1] https://github.com/scottchiefbaker/dool\n[2] https://github.com/nicolargo/glances",
      "parentUuid": "35db1177_af665bb0",
      "revId": "65d805fa186ddf6c64d1bb2c150e6a8f50c0bbf5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1fa77f8_b442119e",
        "filename": ".zuul.yaml",
        "patchSetId": 5
      },
      "lineNbr": 488,
      "author": {
        "id": 6469
      },
      "writtenOn": "2021-05-17T12:41:27Z",
      "side": 1,
      "message": "With my upstream hat on, I\u0027d be hesitant to disabling dstat (and without an alternative to it) to accommodate a change to the default Neutron ML2 backend driver. Most non-Neutron projects do not care for what the network backend is, and their CI jobs would stop running dstat.\n\nControversially, there seems to exist a \"successor\", \"next-generation\" to dstat: pcp-dstat [1][2] (yes, the very same one that led dstat maintainers to archive the project). This tool seems to be somewhat a direct replacement and is packaged in most distributions [3].\n\n[1] https://www.man7.org/linux/man-pages/man1/pcp-dstat.1.html\n[2] https://pcp.io/\n[3] https://pkgs.org/download/dstat",
      "parentUuid": "bfe60edb_6ef1edcb",
      "revId": "65d805fa186ddf6c64d1bb2c150e6a8f50c0bbf5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "77240ea4_f7584291",
        "filename": "lib/neutron_plugins/ml2",
        "patchSetId": 5
      },
      "lineNbr": 17,
      "author": {
        "id": 13252
      },
      "writtenOn": "2021-05-17T10:40:33Z",
      "side": 1,
      "message": "This comment would also need updating",
      "revId": "65d805fa186ddf6c64d1bb2c150e6a8f50c0bbf5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b555a82_32b9c3b5",
        "filename": "lib/neutron_plugins/ml2",
        "patchSetId": 5
      },
      "lineNbr": 20,
      "author": {
        "id": 13252
      },
      "writtenOn": "2021-05-17T10:40:33Z",
      "side": 1,
      "message": "Does this also need updating? Should we verify whether the network type matches what OVN can actually support?",
      "revId": "65d805fa186ddf6c64d1bb2c150e6a8f50c0bbf5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8d0d0eae_1d32c0f2",
        "filename": "lib/neutron_plugins/ovn_agent",
        "patchSetId": 5
      },
      "lineNbr": 393,
      "author": {
        "id": 7118
      },
      "writtenOn": "2021-05-16T23:59:54Z",
      "side": 1,
      "message": "It feels kind of odd to keep this in neutron ... why is installing OVS a thing done here, but the compilation functions for OVS something kept in neutron?",
      "range": {
        "startLine": 392,
        "startChar": 0,
        "endLine": 393,
        "endChar": 44
      },
      "revId": "65d805fa186ddf6c64d1bb2c150e6a8f50c0bbf5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ebb258d_05171448",
        "filename": "lib/neutron_plugins/ovn_agent",
        "patchSetId": 5
      },
      "lineNbr": 393,
      "author": {
        "id": 6773
      },
      "writtenOn": "2021-05-17T08:51:24Z",
      "side": 1,
      "message": "This is legacy because this \"ovs\" module always existed in Neutron AFAICT and we just reuse it because OVN depends on OVS (not long ago, both projects were part of the same repository so compiling OVS also compiled OVN).\n\nThat said, I think we could move the module to DevStack itself. I would need to consult with the Neutron folks about it but I don\u0027t see it as a problem.\n\nFor now, what this patch does is to only load it if we are actually telling DevStack to compile OVS/OVN from source. By default (and the reason why ensure-devstack does not fail anymore) we install OVS and OVN from the host OS packages.\n\nShould this be enough for this patch ? I can work on moving this module \"ovs\" module to DevStack on a separated patch.",
      "parentUuid": "8d0d0eae_1d32c0f2",
      "range": {
        "startLine": 392,
        "startChar": 0,
        "endLine": 393,
        "endChar": 44
      },
      "revId": "65d805fa186ddf6c64d1bb2c150e6a8f50c0bbf5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22e322d8_7165bcfa",
        "filename": "stackrc",
        "patchSetId": 5
      },
      "lineNbr": 75,
      "author": {
        "id": 6469
      },
      "writtenOn": "2021-05-17T11:37:32Z",
      "side": 1,
      "message": "Thanks for making this change, and not only to the Zuul CI jobs!",
      "revId": "65d805fa186ddf6c64d1bb2c150e6a8f50c0bbf5",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    }
  ]
}